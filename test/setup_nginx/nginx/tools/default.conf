server {
    listen 8080;

    server_name localhost;

    location /cgi-bin/ {
        root /usr/lib/;  # Asegúrate de que el root apunte al directorio correcto
        index login.py;
    }

    location ~ ^/cgi-bin/.*\.py {
        include fastcgi_params;
        fastcgi_pass 127.0.0.1:9000;  # Asegúrate de que fcgiwrap esté escuchando en este puerto
        fastcgi_param SCRIPT_FILENAME /usr/lib$fastcgi_script_name;  # Ruta completa del script
        fastcgi_param DOCUMENT_ROOT /usr/lib/cgi-bin;  # Asegúrate de que apunte al directorio correcto
    }

	
	error_page 400 /cgi-bin/400.html;
	location = /cgi-bin/400.html {
		root /usr/lib/;
	}
    error_log /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;
}

server {
    listen 8080 default_server;  # Este bloque actúa como el servidor por defecto para las solicitudes en el puerto 8080.
    server_name _;  # "_" significa que este servidor actuará como el servidor predeterminado cuando no coincidan otros nombres de servidor.

    # Default error page for the catch-all server
    error_page 404 /404.html;  # Redirige a la página de error 404 si la ruta no se encuentra.
    location = /404.html {
        root /usr/share/nginx/html;  # La página de error 404 se buscará en /usr/share/nginx/html.
    }

    # Root directory
    location / {  # Este bloque maneja las solicitudes a la raíz del servidor.
        root /var/www/html;  # Los archivos estáticos se servirán desde /var/www/html.
        index index.html;  # Si la solicitud es para un directorio, se buscará el archivo index.html.
    }
}